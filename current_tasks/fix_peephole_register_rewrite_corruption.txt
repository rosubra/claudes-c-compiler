Task: Fix peephole rewrite_instruction_register producing invalid register names
Status: in_progress

Problem:
The rewrite_instruction_register() function in the x86 peephole optimizer uses
Rust's str::replace() for register name substitution, which doesn't check word
boundaries. When replacing extended register families (r8-r15) with legacy
register families (rax-rdi), the 64-bit replacement (e.g., %r11 -> %rbx) would
corrupt 32-bit register names (e.g., %r11d -> %rbxd instead of %ebx) because
%r11 is a substring of %r11d.

The replace_reg_family() function already uses replace_reg_name_exact() which
has proper boundary checking, but rewrite_instruction_register() was not using it.

Fix:
Replace the naive str::replace() loop in rewrite_instruction_register() with a
call to replace_reg_family(), which correctly handles all register name sizes
with word-boundary awareness.

Impact:
This fixes kernel build failures with "bad register name '%rbxd'" errors in
files like net/core/skbuff.c and lib/base64.c.
