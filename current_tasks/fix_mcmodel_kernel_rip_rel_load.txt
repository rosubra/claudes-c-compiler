Task: Fix mcmodel=kernel to fold GlobalAddr+Load/Store into RIP-relative
Status: completed
Branch: master

Problem:
  In -mcmodel=kernel, GCC uses two different addressing modes:
  - Address-of-symbol (e.g. (unsigned long)_text): movq $symbol, %rax (absolute R_X86_64_32S)
  - Data load (e.g. reading global_var): movl symbol(%rip), %eax (RIP-relative R_X86_64_PC32)

  Our compiler's IR always decomposes global access into GlobalAddr (take address)
  + Load/Store (through pointer). The previous fix (commit 4b7d08d) made emit_global_addr
  use absolute addressing for kernel code model. This correctly handled address-of-symbol
  cases like (_text - __START_KERNEL_map), but left data loads going through the absolute
  virtual address pointer. In early boot code (.head.text) that runs before page tables
  are set up, dereferencing a virtual address crashes the system.

  Specifically, pgtable_l5_enabled() reads __pgtable_l5_enabled via:
    1. movq $__pgtable_l5_enabled, %rax  (absolute virtual address)
    2. movl (%rax), %eax                 (dereference - CRASHES in early boot)

  GCC instead emits a single: movl __pgtable_l5_enabled(%rip), %eax (RIP-relative)

Fix:
  Added GlobalAddr+Load and GlobalAddr+Store folding in the backend for kernel code model.
  When a Load/Store instruction's pointer comes from a GlobalAddr (tracked via the existing
  global_addr_map), the backend emits a single RIP-relative memory access instruction
  instead of going through the absolute address pointer. This matches GCC's behavior:
  - Address-of-symbol (bare GlobalAddr): movq $symbol, %rax (absolute)
  - Data access (GlobalAddr+Load): movl symbol(%rip), %eax (RIP-relative)
  - Data write (GlobalAddr+Store): movl %eax, symbol(%rip) (RIP-relative)

Files changed:
  src/backend/x86/codegen/codegen.rs - emit_global_addr, emit_global_load_rip_rel, emit_global_store_rip_rel
  src/backend/traits.rs - trait methods emit_global_load_rip_rel, emit_global_store_rip_rel
  src/backend/generation.rs - Load/Store dispatch folding for kernel code model
  tests/mcmodel-kernel-rip-rel-data-load-x86/ - new regression test
