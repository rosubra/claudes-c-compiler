Task: Fix __atomic_test_and_set returning garbage upper bytes on i686 (and x86)
Status: in_progress

Problem:
Both x86 and i686 backends emit `movb $1, %al` + `xchgb %al, (addr)` for
AtomicRmwOp::TestAndSet. After xchgb, only %al contains the old value (0 or 1),
but the code stores the FULL %eax/%rax register (via store_eax_to/store_rax_to),
which contains garbage in the upper bytes from prior register usage.

On i686 this causes jansson's json_object_seed() to spin forever:
__atomic_test_and_set returns a non-zero 32-bit value (pointer bits in upper bytes)
even when the flag was 0, so the code enters the "wait for another thread" spin loop
in a single-threaded program.

On x86_64, the bug is latent because register usage patterns typically zero the
upper bytes before the TestAndSet sequence.

Fix: Add `movzbl %al, %eax` after the xchgb in both backends to zero-extend
the byte result to the full register width.

Project that benefits: jansson (JSON library) - currently hangs on i686.
